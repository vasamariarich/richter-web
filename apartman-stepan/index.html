<!DOCTYPE html>
<html lang="cs" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apartmán Štěpán - Velké Karlovice</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,300;0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

    <style>
        /* --- FONTY --- */
        body { font-family: 'Jost', sans-serif; }
        
        /* --- KALENDÁŘ STYLING --- */
        .flatpickr-calendar { background: transparent !important; box-shadow: none !important; width: 100% !important; max-width: 100% !important; padding: 0 !important; margin: 0 !important; }
        .flatpickr-months { padding-top: 10px; padding-bottom: 20px; }
        .flatpickr-month { height: 40px !important; }
        .flatpickr-current-month { font-weight: 700; font-size: 1.1rem; color: #292f36; padding-top: 0 !important; }
        .flatpickr-current-month input.cur-year { font-weight: 700; }
        .flatpickr-weekday { color: #9ca3af !important; font-weight: 400 !important; font-size: 0.9rem !important; }
        
        .dayContainer { justify-content: flex-start !important; }
        
        .flatpickr-day { 
            color: #4b5563; 
            font-weight: 400; 
            border-radius: 0; 
            height: 40px; 
            line-height: 40px; 
            margin-top: 2px;
            max-width: 14.2857% !important; 
            flex-basis: 14.2857% !important;
        }
        
        .flatpickr-day.today { border-color: transparent !important; background: #f3f4f6; }
        
        .flatpickr-day.selected, .flatpickr-day.startRange, .flatpickr-day.endRange {
            background: #8b7e6a !important; color: #fff !important; border-color: #8b7e6a !important;
        }
        .flatpickr-day.inRange {
            background: #e5e7eb !important; color: #4b5563 !important;
            box-shadow: -5px 0 0 #e5e7eb, 5px 0 0 #e5e7eb !important; border-color: #e5e7eb !important;
        }

        /* --- Toggle Switch Styling --- */
        .room-checkbox { display: none; }
        
        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
            background-color: #d1d5db; 
            border-radius: 9999px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background-color: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        .room-checkbox:checked + .toggle-switch { background-color: #8b7e6a; }
        .room-checkbox:checked + .toggle-switch::after { transform: translateX(20px); }

        /* --- CAROUSEL ANIMACE --- */
        .carousel-item {
            transition: transform 0.5s ease-in-out, opacity 0.5s ease-in-out, filter 0.5s ease-in-out;
            will-change: transform;
        }
        .overlay-layer { transition: background-color 0.5s ease-in-out; }
        .content-layer { transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out; }

        /* --- SKRYTÍ SCROLLBARU PRO GALERII V MODALU --- */
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

        /* Custom colors rewrite */
        .text-primary { color: #cda274; }
        .bg-primary { background-color: #cda274; }
        .hover\:bg-primaryHover:hover { background-color: #b88e5d; }
        .selection\:bg-primary::selection { background-color: #cda274; }
    </style>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { primary: '#cda274', primaryHover: '#b88e5d', secondary: '#292f36', beige: '#F9F8F6' },
                    fontFamily: { sans: ['"Jost"', 'sans-serif'], serif: ['"Jost"', 'serif'], }
                }
            }
        }
    </script>
</head>

<body class="font-sans text-secondary antialiased bg-white selection:bg-primary selection:text-white">

    <header id="hero" class="relative m-3 h-[calc(100vh-1.5rem)] min-h-[600px] rounded-[10px] overflow-hidden flex flex-col bg-cover bg-center shadow-lg" style="background-image: url('./images/hero-bg.png');">        
        <div class="absolute inset-0 bg-black/40 z-0"></div>

        <nav id="navbar" class="fixed top-0 left-0 z-50 py-8 px-8 md:px-12 flex items-center justify-between text-white w-full transition-all duration-300">
            
            <div class="hidden xl:flex space-x-8 items-center text-xs tracking-[0.2em] font-bold uppercase w-1/3 justify-start group whitespace-nowrap">
                <a href="#about" class="transition-opacity duration-300 group-hover:opacity-50 hover:!opacity-100">O apartmánu</a>
                <a href="#dispozice" class="transition-opacity duration-300 group-hover:opacity-50 hover:!opacity-100">Vybavení</a>
                <a href="#trips" class="transition-opacity duration-300 group-hover:opacity-50 hover:!opacity-100">Okolí</a>
                <a href="#reservation" class="transition-opacity duration-300 group-hover:opacity-50 hover:!opacity-100">Ceník a Kontakt</a>
            </div>

            <a href="#" class="text-xl md:text-2xl font-bold tracking-[0.2em] uppercase group absolute left-1/2 transform -translate-x-1/2 text-center">
                Apartmán<br><span id="nav-logo-text" class="font-normal text-white transition-colors duration-300">Štěpán</span>
            </a>

            <div class="hidden xl:flex items-center gap-6 w-1/3 justify-end">
                <a href="#reservation" class="bg-gray-900/50 hover:bg-primary border border-white/20 backdrop-blur-sm px-6 py-3 rounded-md text-xs font-bold tracking-widest uppercase transition duration-300 flex items-center gap-2">
                    <i class="fa-regular fa-bell"></i> Poptat termín
                </a>
            </div>

            <button id="mobile-menu-btn" class="xl:hidden text-2xl text-white focus:outline-none z-50 ml-auto transition-colors duration-300">
                <i class="fas fa-bars"></i>
            </button>
        </nav>

        <div id="mobile-menu" class="hidden fixed top-0 left-0 w-full h-full bg-gray-900/95 backdrop-blur-xl text-white z-40 flex flex-col items-center justify-center space-y-8">
            <a href="#about" class="text-xl uppercase tracking-widest hover:text-primary">O apartmánu</a>
            <a href="#dispozice" class="text-xl uppercase tracking-widest hover:text-primary">Vybavení</a>
            <a href="#trips" class="text-xl uppercase tracking-widest hover:text-primary">Okolí</a>
            <a href="#reservation" class="text-xl uppercase tracking-widest text-primary">Rezervace</a>
        </div>

        <div class="relative z-10 flex-grow flex flex-col items-center justify-center text-center text-white px-4 animate-fade-in pt-20">
            <h1 class="text-5xl md:text-7xl lg:text-8xl font-bold tracking-tight mb-6 leading-tight drop-shadow-lg">
                Velké Karlovice<br>Beskydy<br>Tradice
            </h1>
            
            <div class="my-6 text-white/80">
                <svg width="80" height="15" viewBox="0 0 60 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 5C1 5 6 1 10.5 1C15 1 20 9 24.5 9C29 9 34 1 38.5 1C43 1 48 9 52.5 9C57 9 59 5 59 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
            </div>

            <p class="font-serif italic text-xl md:text-2xl text-white/90 font-normal tracking-wide drop-shadow-md">
                Podkrovní apartmán v bývalé škole<br>na rozcestí údolí
            </p>
        </div>

        <div class="relative z-10 pb-8 flex justify-center w-full animate-bounce mt-auto">
            <a href="#welcome" class="w-10 h-10 border border-white/30 rounded-full flex items-center justify-center text-white hover:bg-white hover:text-secondary transition duration-300 backdrop-blur-sm">
                <i class="fa-solid fa-arrow-down"></i>
            </a>
        </div>
    </header>

    <section id="welcome" class="py-24 md:py-32 bg-white text-center">
        <div class="container mx-auto px-6 max-w-4xl">
            <span class="block text-xs font-bold tracking-[0.2em] uppercase mb-5 text-secondary">
                Vítejte ve Velkých Karlovicích
            </span>
            
            <h2 class="text-4xl md:text-6xl font-bold text-secondary mb-8 leading-tight">
                Ubytování s historií<br>v srdci Valašska
            </h2>
            
            <div class="text-primary mb-8 flex justify-center">
                <svg width="60" height="10" viewBox="0 0 60 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 5C1 5 6 1 10.5 1C15 1 20 9 24.5 9C29 9 34 1 38.5 1C43 1 48 9 52.5 9C57 9 59 5 59 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
            </div>
            
            <p class="text-gray-500 font-serif text-lg leading-relaxed max-w-2xl mx-auto">
                Apartmán Štěpán se nachází v podkroví domu, který kdysi sloužil jako škola nebo jako celnice. Dům stojí ve Velkých Karlovicích, na rozcestí dvou údolí Podťaté a Tísňavy.
                <br><br>
                Objekt leží přímo ve Vesnické památkové zóně a v jeho okolí můžete obdivovat tradiční Valašská stavení. Díky své poloze je ideálním výchozím bodem pro desítky kilometrů cyklistických a turistických tras.
            </p>
            
            <div class="mt-8 flex justify-center gap-2">
                 <span class="inline-block bg-primary/10 text-primary px-4 py-2 rounded-full text-xs font-bold uppercase tracking-wider">Až 5 osob</span>
                 <span class="inline-block bg-gray-100 text-gray-600 px-4 py-2 rounded-full text-xs font-bold uppercase tracking-wider">Památková zóna</span>
            </div>
        </div>
    </section>

    <section id="about" class="py-24 bg-gray-50 relative overflow-hidden">
        <div class="absolute top-0 left-0 w-96 h-96 bg-primary/5 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 pointer-events-none"></div>
        <div class="absolute bottom-0 right-0 w-[500px] h-[500px] bg-secondary/3 rounded-full blur-3xl translate-x-1/3 translate-y-1/3 pointer-events-none"></div>

        <div class="container mx-auto px-6">
            <div class="flex flex-col lg:flex-row gap-16 items-start">
                
                <div class="w-full lg:w-1/2 relative mt-8 lg:mt-0">
                    <div class="relative z-10 rounded-2xl overflow-hidden shadow-2xl group">
                        <img src="./images/about-main.jpg" alt="Exteriér domu" class="w-full h-auto object-cover transform group-hover:scale-105 transition duration-700 ease-in-out">
                    </div>
                    
                    <div class="absolute -bottom-10 -right-5 lg:-right-10 w-2/3 rounded-2xl overflow-hidden shadow-xl border-4 border-white z-20">
                        <img src="./images/about-detail.jpg" alt="Detail interiéru" class="w-full h-auto object-cover">
                    </div>

                    <div class="absolute top-10 -left-6 z-30 bg-white p-5 rounded-xl shadow-lg border border-gray-100 flex items-center gap-3 animate-[bounce_3s_infinite]">
                        <div class="text-center">
                            <i class="fa-solid fa-star text-primary text-2xl"></i>
                        </div>
                        <div class="text-xs font-bold text-secondary uppercase tracking-wider leading-tight">
                            Historie &<br>Komfort
                        </div>
                    </div>
                </div>

                <div class="w-full lg:w-1/2 lg:pl-10">
                    <span class="block text-primary font-bold tracking-[0.2em] text-sm uppercase mb-4">Vybavení</span>
                    <h2 class="text-4xl lg:text-5xl font-bold text-secondary mb-6 leading-tight">Kompletní zázemí<br>pro vaši dovolenou.</h2>
                    
                    <div class="space-y-4 mb-10 text-gray-500 text-lg leading-relaxed font-normal">
                        <p>
                            Byt má dvě ložnice (celkem 5 lůžek), kuchyň, obývací pokoj s jídelním stolem, koupelnu, oddělené WC a sklepní prostory.
                        </p>
                        <p>
                            Vše pro rodiny s dětmi: dětské plastové nádobí, WC prkénko, stupátko k umyvadlu, dětská židlička a hračky. K dispozici WI-FI, ručníky i povlečení v ceně.
                        </p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
                        <div class="flex gap-4">
                            <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary text-xl flex-shrink-0">
                                <i class="fa-solid fa-tv"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-secondary text-sm uppercase tracking-wide mb-1">Obývák</h4>
                                <p class="text-xs text-gray-400 leading-relaxed">Rohová sedačka, TV Sat Skylink.</p>
                            </div>
                        </div>
                        
                        <div class="flex gap-4">
                            <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary text-xl flex-shrink-0">
                                <i class="fa-solid fa-kitchen-set"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-secondary text-sm uppercase tracking-wide mb-1">Kuchyně</h4>
                                <p class="text-xs text-gray-400 leading-relaxed">Myčka, kávovar Tchibo, mikrovlnka.</p>
                            </div>
                        </div>

                        <div class="flex gap-4">
                            <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary text-xl flex-shrink-0">
                                <i class="fa-solid fa-bath"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-secondary text-sm uppercase tracking-wide mb-1">Koupelna</h4>
                                <p class="text-xs text-gray-400 leading-relaxed">2 umyvadla, sprcha, pračka.</p>
                            </div>
                        </div>

                        <div class="flex gap-4">
                            <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary text-xl flex-shrink-0">
                                <i class="fa-solid fa-warehouse"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-secondary text-sm uppercase tracking-wide mb-1">Sklep</h4>
                                <p class="text-xs text-gray-400 leading-relaxed">V přízemí pro kola/lyže.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="dispozice" class="py-24 bg-white overflow-hidden">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <span class="block text-primary font-bold tracking-[0.2em] text-sm uppercase mb-3">Dispozice</span>
                <h2 class="text-4xl font-bold uppercase">Uspořádání apartmánu</h2>
            </div>
            
            <div class="flex flex-col lg:flex-row items-center relative mb-24">
                <div class="w-full lg:w-2/3 h-[400px] md:h-[500px] relative rounded-2xl overflow-hidden shadow-lg group">
                    <img src="./images/room-living.jpg" alt="Obývací pokoj" class="w-full h-full object-cover transition duration-700 group-hover:scale-105">
                </div>
                <div class="w-full lg:w-1/3 relative mt-6 lg:mt-0 lg:-ml-16 z-10">
                    <div class="bg-white p-8 md:p-10 rounded-xl shadow-2xl border border-gray-100 relative">
                        <small class="block text-gray-400 font-bold uppercase tracking-widest text-xs mb-2">
                            Denní část
                        </small>
                        <h2 class="text-2xl md:text-3xl font-bold text-secondary mb-6">
                            Obývací pokoj & Kuchyně
                        </h2>
                        <div class="border-t border-gray-100 pt-6 mb-8">
                            <p class="text-gray-500 font-serif text-sm leading-relaxed mb-4">
                                Prostorná místnost pro společné chvíle. V předsíni je dostatek místa na boty a oblečení.
                            </p>
                            <ul class="space-y-3">
                                <li class="flex items-center text-gray-500 text-sm font-bold uppercase tracking-wider">
                                    <i class="fa-solid fa-couch text-primary w-8 text-center mr-2"></i> Rohová sedací souprava
                                </li>
                                <li class="flex items-center text-gray-500 text-sm font-bold uppercase tracking-wider">
                                    <i class="fa-solid fa-utensils text-primary w-8 text-center mr-2"></i> Jídelní stůl pro 4
                                </li>
                                <li class="flex items-center text-gray-500 text-sm font-bold uppercase tracking-wider">
                                    <i class="fa-solid fa-mug-hot text-primary w-8 text-center mr-2"></i> Kapslový kávovar Tchibo
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex flex-col lg:flex-row items-center relative mb-24">
                <div class="w-full lg:w-1/3 relative mt-6 lg:mt-0 lg:-mr-16 z-10 order-2 lg:order-1">
                    <div class="bg-white p-8 md:p-10 rounded-xl shadow-2xl border border-gray-100 relative">
                        <small class="block text-gray-400 font-bold uppercase tracking-widest text-xs mb-2">
                            Klidová zóna
                        </small>
                        <h2 class="text-2xl md:text-3xl font-bold text-secondary mb-6">
                            2 Ložnice
                        </h2>
                        <div class="border-t border-gray-100 pt-6 mb-8">
                            <p class="text-gray-500 font-serif text-sm leading-relaxed mb-4">
                                Dvě samostatné ložnice vybavené skříněmi nebo komodami na oblečení.
                            </p>
                            <ul class="space-y-3">
                                <li class="flex items-center text-gray-500 text-sm font-bold uppercase tracking-wider">
                                    <i class="fa-solid fa-bed text-primary w-8 text-center mr-2"></i> Ložnice 1: Manželská + jednolůžko (160+90cm)
                                </li>
                                <li class="flex items-center text-gray-500 text-sm font-bold uppercase tracking-wider">
                                    <i class="fa-solid fa-bed text-primary w-8 text-center mr-2"></i> Ložnice 2: Manželská (160cm)
                                </li>
                                <li class="flex items-center text-gray-500 text-sm font-bold uppercase tracking-wider">
                                    <i class="fa-solid fa-users text-primary w-8 text-center mr-2"></i> Celkem 5 lůžek
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="w-full lg:w-2/3 h-[400px] md:h-[500px] relative rounded-2xl overflow-hidden shadow-lg group order-1 lg:order-2">
                    <img src="./images/room-bedroom.jpg" alt="Ložnice" class="w-full h-full object-cover transition duration-700 group-hover:scale-105">
                </div>
            </div>

            <div class="flex flex-col lg:flex-row items-center relative">
                <div class="w-full lg:w-2/3 h-[400px] md:h-[500px] relative rounded-2xl overflow-hidden shadow-lg group">
                    <img src="./images/room-bathroom.jpg" alt="Koupelna" class="w-full h-full object-cover transition duration-700 group-hover:scale-105">
                </div>
                <div class="w-full lg:w-1/3 relative mt-6 lg:mt-0 lg:-ml-16 z-10">
                    <div class="bg-white p-8 md:p-10 rounded-xl shadow-2xl border border-gray-100 relative">
                        <small class="block text-gray-400 font-bold uppercase tracking-widest text-xs mb-2">
                            Hygiena & Servis
                        </small>
                        <h2 class="text-2xl md:text-3xl font-bold text-secondary mb-6">
                            Koupelna & Zázemí
                        </h2>
                        <div class="border-t border-gray-100 pt-6 mb-8">
                             <p class="text-gray-500 font-serif text-sm leading-relaxed mb-4">
                                Komfortní sociální zázemí a praktické prostory pro sportovní vybavení.
                            </p>
                            <ul class="space-y-3">
                                <li class="flex items-center text-gray-500 text-sm font-bold uppercase tracking-wider">
                                    <i class="fa-solid fa-sink text-primary w-8 text-center mr-2"></i> Koupelna (2 umyvadla, sprcha, pračka)
                                </li>
                                <li class="flex items-center text-gray-500 text-sm font-bold uppercase tracking-wider">
                                    <i class="fa-solid fa-toilet text-primary w-8 text-center mr-2"></i> Samostatné WC
                                </li>
                                <li class="flex items-center text-gray-500 text-sm font-bold uppercase tracking-wider">
                                    <i class="fa-solid fa-dolly text-primary w-8 text-center mr-2"></i> Sklep v přízemí (kola/lyže)
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mt-16 text-center">
                 <a href="#reservation" class="group inline-flex items-center gap-3 bg-secondary hover:bg-primary text-white px-10 py-5 rounded-full transition duration-300 shadow-xl text-sm font-bold uppercase tracking-widest">
                    <span>Rezervovat celý objekt</span>
                    <i class="fa-solid fa-calendar-check group-hover:scale-110 transition-transform"></i>
                </a>
            </div>
        </div>
    </section>

   <section id="trips" class="py-24 bg-[#fcfbf9] overflow-hidden relative">
        <div class="container mx-auto px-6 mb-10 text-center">
            <span class="block text-primary font-bold tracking-[0.2em] text-sm uppercase mb-3">Lokalita a okolí</span>
            <h2 class="text-4xl font-bold text-secondary uppercase">Turistika & Zábava</h2>
            <div class="w-24 h-1 bg-primary mx-auto mt-6 rounded-full"></div>
            <p class="mt-6 text-gray-500 max-w-2xl mx-auto">Velké Karlovice nabízí desítky kilometrů značených tras, Ski areály i Valašskou architekturu.</p>
        </div>

        <div class="relative w-full h-[400px] md:h-[550px] flex items-center justify-center">

            <button id="prevBtn" class="absolute left-4 md:left-10 z-30 w-12 h-12 md:w-16 md:h-16 bg-white/80 hover:bg-white text-secondary rounded-full shadow-lg flex items-center justify-center transition hover:scale-110 focus:outline-none backdrop-blur-sm">
                <i class="fa-solid fa-arrow-left text-xl"></i>
            </button>

            <button id="nextBtn" class="absolute right-4 md:right-10 z-30 w-12 h-12 md:w-16 md:h-16 bg-white/80 hover:bg-white text-secondary rounded-full shadow-lg flex items-center justify-center transition hover:scale-110 focus:outline-none backdrop-blur-sm">
                <i class="fa-solid fa-arrow-right text-xl"></i>
            </button>

            <div id="track" class="flex gap-4 md:gap-8 items-center absolute left-1/2 transition-transform duration-500 ease-out will-change-transform">
                
                <div class="carousel-item relative flex-shrink-0 w-[80vw] md:w-[650px] h-[400px] md:h-[500px] rounded-lg overflow-hidden shadow-2xl cursor-pointer group">
                    <img src="./images/trip-ski.jpg" class="absolute inset-0 w-full h-full object-cover" alt="Ski Areál Razula">
                    <div class="overlay-layer absolute inset-0 bg-white/60 z-10"></div>
                    <div class="content-layer absolute bottom-0 left-0 w-full p-8 z-20 opacity-0 transition-opacity duration-500 text-white bg-gradient-to-t from-black/80 via-black/30 to-transparent translate-y-4">
                        <small class="block text-white font-bold text-xs uppercase tracking-widest mb-1">Zima</small>
                        <h3 class="text-3xl font-bold font-serif text-white">Ski Areály Razula & Machůzky</h3>
                    </div>
                </div>

                <div class="carousel-item relative flex-shrink-0 w-[80vw] md:w-[650px] h-[400px] md:h-[500px] rounded-lg overflow-hidden shadow-2xl cursor-pointer group">
                    <img src="./images/trip-pool.webp" class="absolute inset-0 w-full h-full object-cover" alt="Vodní svět">
                    <div class="overlay-layer absolute inset-0 bg-white/60 z-10"></div>
                    <div class="content-layer absolute bottom-0 left-0 w-full p-8 z-20 opacity-0 transition-opacity duration-500 text-white bg-gradient-to-t from-black/80 via-black/30 to-transparent translate-y-4">
                        <small class="block text-white font-bold text-xs uppercase tracking-widest mb-1">Relax</small>
                        <h3 class="text-3xl font-bold font-serif text-white">Aquapark Vodní svět</h3>
                    </div>
                </div>

                <div class="carousel-item relative flex-shrink-0 w-[80vw] md:w-[650px] h-[400px] md:h-[500px] rounded-lg overflow-hidden shadow-2xl cursor-pointer group">
                    <img src="./images/trip-cyklo.jpeg" class="absolute inset-0 w-full h-full object-cover" alt="Cyklostezka">
                    <div class="overlay-layer absolute inset-0 bg-white/60 z-10"></div>
                    <div class="content-layer absolute bottom-0 left-0 w-full p-8 z-20 opacity-0 transition-opacity duration-500 text-white bg-gradient-to-t from-black/80 via-black/30 to-transparent translate-y-4">
                        <small class="block text-white font-bold text-xs uppercase tracking-widest mb-1">Sport</small>
                        <h3 class="text-3xl font-bold font-serif text-white">Cyklostezka Bečva</h3>
                    </div>
                </div>

                <div class="carousel-item relative flex-shrink-0 w-[80vw] md:w-[650px] h-[400px] md:h-[500px] rounded-lg overflow-hidden shadow-2xl cursor-pointer group">
                    <img src="./images/trip-valassko.jpg" class="absolute inset-0 w-full h-full object-cover" alt="Valašsko">
                    <div class="overlay-layer absolute inset-0 bg-white/60 z-10"></div>
                    <div class="content-layer absolute bottom-0 left-0 w-full p-8 z-20 opacity-0 transition-opacity duration-500 text-white bg-gradient-to-t from-black/80 via-black/30 to-transparent translate-y-4">
                        <small class="block text-white font-bold text-xs uppercase tracking-widest mb-1">Turistika</small>
                        <h3 class="text-3xl font-bold font-serif text-white">Rozhledna Miloňová</h3>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <section class="py-24 bg-secondary text-white relative">
        <div class="absolute top-10 right-10 text-9xl text-white/5 font-serif pointer-events-none">“</div>
        <div class="container mx-auto px-6 relative z-10 text-center">
            <div class="text-center mb-10">
                <span class="block text-primary font-bold tracking-[0.2em] text-sm uppercase mb-3">Recenze</span>
                <h2 class="text-4xl font-bold uppercase">Co říkají naši hosté</h2>
            </div>
             <p class="text-2xl italic font-serif text-gray-300">"Krásné čisté ubytování, v pěkném prostředí."</p>
             <p class="text-primary mt-4 font-bold uppercase tracking-widest text-xs">- Jana, Zima 2025</p>
        </div>
    </section>

    <section id="gallery" class="py-24 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <span class="block text-primary font-bold tracking-[0.2em] text-sm uppercase mb-3">Fotogalerie</span>
                <h2 class="text-4xl font-bold text-secondary uppercase">Apartmán Štěpán</h2>
                <div class="w-24 h-1 bg-primary mx-auto mt-6 rounded-full"></div>
            </div>

            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 auto-rows-[250px] md:auto-rows-[300px]">
                
                <div class="col-span-1 sm:col-span-2 md:col-span-2 md:row-span-2 relative overflow-hidden rounded-2xl group cursor-pointer" onclick="openImageModal(this.querySelector('img').src)">
                    <img src="./images/gallery-1.jpg" alt="Exteriér" class="w-full h-full object-cover transition duration-700 group-hover:scale-110">
                    <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition duration-500"></div>
                </div>

                <div class="relative overflow-hidden rounded-2xl group cursor-pointer" onclick="openImageModal(this.querySelector('img').src)">
                    <img src="./images/gallery-2.jpg" alt="Detail 1" class="w-full h-full object-cover transition duration-700 group-hover:scale-110">
                    <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition duration-500"></div>
                </div>

                <div class="relative overflow-hidden rounded-2xl group cursor-pointer" onclick="openImageModal(this.querySelector('img').src)">
                    <img src="./images/gallery-3.jpg" alt="Detail 2" class="w-full h-full object-cover transition duration-700 group-hover:scale-110">
                    <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition duration-500"></div>
                </div>

                <div class="relative overflow-hidden rounded-2xl group cursor-pointer" onclick="openImageModal(this.querySelector('img').src)">
                    <img src="./images/gallery-4.jpg" alt="Detail 3" class="w-full h-full object-cover transition duration-700 group-hover:scale-110">
                    <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition duration-500"></div>
                </div>

                <div class="relative overflow-hidden rounded-2xl group cursor-pointer" onclick="openImageModal(this.querySelector('img').src)">
                    <img src="./images/gallery-5.jpg" alt="Interiér" class="w-full h-full object-cover transition duration-700 group-hover:scale-110">
                    <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition duration-500"></div>
                </div>

            </div>

            <div class="mt-12 text-center">
                <a href="https://www.e-chalupy.cz/apartman-stepan-velke-karlovice-ubytovani-o17179" target="_blank" class="inline-flex items-center gap-3 bg-secondary hover:bg-primary text-white px-8 py-4 rounded-full transition duration-300 shadow-lg text-xs font-bold uppercase tracking-widest group">
                    <span>Zobrazit celou galerii</span>
                    <i class="fa-solid fa-camera group-hover:scale-110 transition-transform"></i>
                </a>
            </div>
        </div>
    </section>

    <section id="reservation" class="py-32 bg-[#F9F8F6]">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-16 items-start">
                
                <div class="lg:col-span-4 lg:pt-10">
                    <span class="block text-[#a89076] font-bold tracking-[0.2em] text-xs uppercase mb-6">Rezervace</span>
                    <h2 class="text-5xl font-bold text-secondary mb-8 leading-tight">Ceník & Poptávka</h2>
                    <div class="text-gray-600 leading-relaxed mb-10 text-sm font-light space-y-4">
                        <p class="font-bold text-xl text-primary">Cena od 2 550 Kč / noc</p>
                        <p class="font-bold">Upřednostňujeme týdenní pobyty (So-So nebo Ne-Ne).</p>
                        
                        <div class="border-l-4 border-primary pl-4">
                            <strong class="block text-secondary">Letní sezóna (1.6. - 30.9.)</strong>
                            21 000 Kč / týden
                        </div>

                        <div class="border-l-4 border-secondary pl-4">
                            <strong class="block text-secondary">Zimní sezóna (1.12. - 15.3.)</strong>
                            21 000 Kč / týden
                        </div>

                        <div>
                            <strong class="block text-secondary">Mimo sezónu</strong>
                            17 850 Kč / týden
                        </div>
                        
                        <div class="bg-white p-4 rounded-lg shadow-sm text-xs">
                            <strong>Svátky (min. 3 noci):</strong><br>
                            Vánoce, Silvestr, Velikonoce: 3 500 Kč/noc<br>
                            Jarní prázdniny: 3 000 Kč/noc
                        </div>
                        
                        <p class="text-xs mt-4">
                            <strong>V ceně:</strong> energie, voda, úklid, poplatek obci.<br>
                            <strong>Záloha:</strong> 50% (vratná dle podmínek).
                        </p>
                    </div>

                    <div class="inline-flex items-center gap-6 group">
                        <div class="w-12 h-12 flex-shrink-0 text-[#a89076]">
                            <i class="fa-solid fa-envelope text-4xl"></i>
                        </div>
                        <div>
                            <span class="block text-[10px] text-gray-500 uppercase tracking-[0.2em] font-bold mb-1">Máte dotaz?</span>
                            <span class="text-[#a89076] text-lg font-bold tracking-wide group-hover:text-primaryHover transition">776 289 711</span>
                        </div>
                    </div>
                </div>

                <div class="lg:col-span-8">
                    <div class="bg-white p-8 md:p-12 rounded-[2rem] shadow-xl">
                        <form id="bookingForm" onsubmit="event.preventDefault(); alert('Poptávka odeslána! Majitel vás bude brzy kontaktovat.');">
                            
                            <h3 class="text-xl font-bold text-secondary mb-6">Nezávazná poptávka termínu</h3>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
                                <div>
                                    <label class="block text-sm text-gray-600 font-light mb-3">Počet dospělých</label>
                                    <div class="relative group">
                                        <select id="adults" class="w-full bg-[#F9F8F6] text-gray-700 h-14 pl-6 pr-10 rounded-lg appearance-none focus:outline-none cursor-pointer shadow-sm text-sm font-medium" onchange="updateGuestLogic()">
                                        </select>
                                        <div class="absolute right-5 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400"><i class="fa-solid fa-chevron-down text-xs"></i></div>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm text-gray-600 font-light mb-3">Počet dětí</label>
                                    <div class="relative group">
                                        <select id="children" class="w-full bg-[#F9F8F6] text-gray-700 h-14 pl-6 pr-10 rounded-lg appearance-none focus:outline-none cursor-pointer shadow-sm text-sm font-medium" onchange="toggleChildAges(this.value); updateGuestLogic()">
                                        </select>
                                        <div class="absolute right-5 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400"><i class="fa-solid fa-chevron-down text-xs"></i></div>
                                    </div>
                                </div>
                            </div>

                            <div id="child_ages_container" class="grid grid-cols-2 gap-4 mb-8 hidden"></div>

                            <div class="bg-[#F9F8F6] rounded-2xl p-6 md:p-8 shadow-inner mb-6">
                                <label class="block text-sm text-gray-600 font-light mb-3">Vyberte termín pobytu</label>
                                <input type="text" id="inline-calendar-input" class="hidden">
                            </div>

                            <div id="room-selection" class="hidden mb-6 p-4 border border-primary/20 bg-primary/5 rounded-lg">
                                <div class="flex items-center justify-between">
                                     <div class="flex items-center gap-3">
                                         <input type="checkbox" id="room1" class="room-checkbox" data-luzka="5" checked disabled>
                                         <div class="w-5 h-5 bg-primary rounded-full flex items-center justify-center text-white text-xs"><i class="fa-solid fa-check"></i></div>
                                         <span class="font-bold text-secondary">Celý Apartmán Štěpán</span>
                                     </div>
                                </div>
                                <div id="capacity-warning" class="text-red-500 font-medium text-xs mt-2 hidden"></div>
                            </div>

                            <div id="price-summary" class="hidden mb-6">
                                <p class="text-secondary font-bold text-base md:text-lg mb-1" id="price-text"></p>
                                <p class="text-xs text-orange-600 font-bold">* Uvedená cena je pouze orientační. Finální cena se řídí ceníkem dle sezóny (Vánoce, Silvestr, prázdniny).</p>
                            </div>

                            <div class="flex justify-end">
                                <button type="submit" id="submitBtn" class="bg-secondary border-2 border-secondary text-white font-bold uppercase tracking-widest text-xs px-10 py-4 rounded-full hover:bg-gray-800 transition shadow-lg opacity-50 cursor-not-allowed" disabled>
                                    Odeslat poptávku
                                </button>
                            </div>

                        </form>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <section id="map" class="w-full h-[500px] relative">
        <iframe 
            width="100%" 
            height="100%" 
            frameborder="0" 
            scrolling="no" 
            marginheight="0" 
            marginwidth="0" 
            title="Mapa Apartmán Štěpán"
            src="https://maps.google.com/maps?q=49.35945,18.33953&hl=cs&z=15&output=embed"
            style="filter: grayscale(0.8) contrast(1.1); transition: filter 0.5s ease;"
            class="w-full h-full hover:filter-none"
        ></iframe>
        
        <div class="absolute top-10 left-10 md:left-20 bg-white p-6 rounded-xl shadow-2xl max-w-xs z-10 hidden md:block border border-gray-100">
            <h3 class="text-secondary font-bold uppercase tracking-widest text-sm mb-2">Adresa</h3>
            <p class="text-gray-500 leading-relaxed text-sm font-serif">
                Apartmán Štěpán<br>
                Velké Karlovice 516<br>
                756 06 Velké Karlovice
            </p>
            <p class="text-xs text-gray-400 mt-2">GPS: 49.35945N, 18.33953E</p>
            <a href="https://www.google.com/maps/search/?api=1&query=49.35945,18.33953" target="_blank" class="text-primary text-xs font-bold uppercase tracking-widest mt-4 inline-block hover:text-primaryHover transition">
                Otevřít v Google Maps <i class="fa-solid fa-arrow-up-right-from-square ml-1"></i>
            </a>
        </div>
    </section>

    <footer class="bg-secondary text-white pt-20 pb-10 border-t border-white/10">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12 mb-16">
                
                <div class="space-y-6">
                    <a href="#" class="text-3xl font-bold tracking-widest text-white uppercase inline-block">
                        Apartmán <span class="text-primary">Štěpán</span>
                    </a>
                    <p class="text-gray-400 leading-relaxed text-sm">
                        Podkrovní apartmán v bývalé škole ve Velkých Karlovicích. Ideální výchozí bod pro turistiku i lyžování v Beskydech.
                    </p>
                    
                    <ul class="space-y-4 mt-6">
                        <li class="flex items-start gap-3">
                            <div class="mt-1 w-6 flex justify-center">
                                <i class="fa-solid fa-location-dot text-primary"></i>
                            </div>
                            <span class="text-gray-400 text-sm leading-relaxed">
                                Velké Karlovice 516<br>
                                Beskydy
                            </span>
                        </li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-lg font-bold uppercase mb-6 tracking-wider">Navigace</h4>
                    <ul class="space-y-4 text-gray-400">
                        <li><a href="#" class="hover:text-primary transition">Úvod</a></li>
                        <li><a href="#about" class="hover:text-primary transition">O apartmánu</a></li>
                        <li><a href="#dispozice" class="hover:text-primary transition">Vybavení</a></li>
                        <li><a href="#trips" class="hover:text-primary transition">Výlety</a></li>
                        <li><a href="#reservation" class="hover:text-primary transition">Kontakt</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="text-lg font-bold uppercase mb-6 tracking-wider">Tipy v okolí</h4>
                    <div class="space-y-2 text-gray-400 text-sm">
                        <p class="hover:text-white transition cursor-default">Restaurace Pod Pralesem</p>
                        <p class="hover:text-white transition cursor-default">Restaurace Vyhlídka</p>
                        <p class="hover:text-white transition cursor-default">Pepicentrum</p>
                    </div>
                </div>
            </div>

            <div class="border-t border-white/10 pt-8 flex flex-col md:flex-row justify-between items-center gap-4 text-gray-500 text-sm">
                <p>© 2026 Apartmán Štěpán.</p>
                <div class="flex gap-4 text-lg">
                    <a href="#" class="hover:text-primary transition"><i class="fa-brands fa-facebook"></i></a>
                    <a href="#" class="hover:text-primary transition"><i class="fa-brands fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <div id="image-modal" class="fixed inset-0 z-[100] hidden bg-black/90 backdrop-blur-sm flex items-center justify-center p-4 opacity-0 transition-opacity duration-300">
        <button onclick="closeImageModal()" class="absolute top-4 right-4 text-white hover:text-primary transition text-4xl z-50 p-4">
            <i class="fa-solid fa-xmark"></i>
        </button>
        
        <img id="modal-image" src="" alt="Detail" class="max-w-full max-h-[90vh] rounded-lg shadow-2xl scale-95 transition-transform duration-300 object-contain">
    </div>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/cs.js"></script>
    <script>
        // ==========================================
        // KONFIGURACE PRO APARTMÁN ŠTĚPÁN
        // ==========================================
        const KONFIGURACE = {
            maxKapacita: 5, // 5 lůžek (2 ložnice)
            zakladniCenaNoc: 2550 // Cena od 2 550 Kč
        };

        let selectedDatesRange = [];
        let numberOfNights = 0;

        document.addEventListener('DOMContentLoaded', () => {
            initDropdowns();
            initCarousel();
            initCalendar();
            initNavbarScroll();
            
            // Mobile Menu
            const mobileBtn = document.getElementById('mobile-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            if(mobileBtn && mobileMenu) {
                mobileBtn.addEventListener('click', () => { mobileMenu.classList.toggle('hidden'); });
                document.querySelectorAll('#mobile-menu a').forEach(link => { link.addEventListener('click', () => { mobileMenu.classList.add('hidden'); }); });
            }
        });

        // ==========================================
        // SCROLL NAVBAR EFEKT
        // ==========================================
        function initNavbarScroll() {
            const navbar = document.getElementById('navbar');
            const navLogoText = document.getElementById('nav-logo-text');
            const mobileBtn = document.getElementById('mobile-menu-btn');

            window.addEventListener('scroll', () => {
                if (window.scrollY > 20) {
                    // Scrolled State
                    navbar.classList.remove('py-8', 'text-white');
                    navbar.classList.add('py-4', 'bg-white/90', 'backdrop-blur-md', 'shadow-md', 'text-secondary');
                    
                    navLogoText.classList.remove('text-white');
                    navLogoText.classList.add('text-primary');
                    
                    mobileBtn.classList.remove('text-white');
                    mobileBtn.classList.add('text-secondary');
                } else {
                    // Top State
                    navbar.classList.add('py-8', 'text-white');
                    navbar.classList.remove('py-4', 'bg-white/90', 'backdrop-blur-md', 'shadow-md', 'text-secondary');
                    
                    navLogoText.classList.add('text-white');
                    navLogoText.classList.remove('text-primary');
                    
                    mobileBtn.classList.add('text-white');
                    mobileBtn.classList.remove('text-secondary');
                }
            });
        }

        // ==========================================
        // LIGHTBOX FUNKCE
        // ==========================================
        function openImageModal(src) {
            const modal = document.getElementById('image-modal');
            const modalImg = document.getElementById('modal-image');
            
            modalImg.src = src;
            modal.classList.remove('hidden');
            
            // Small delay to allow display:block to apply before opacity transition
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                modalImg.classList.remove('scale-95');
                modalImg.classList.add('scale-100');
            }, 10);
            
            document.body.style.overflow = 'hidden'; // Prevent scrolling
        }

        function closeImageModal() {
            const modal = document.getElementById('image-modal');
            const modalImg = document.getElementById('modal-image');

            modal.classList.add('opacity-0');
            modalImg.classList.remove('scale-100');
            modalImg.classList.add('scale-95');
            
            setTimeout(() => {
                modal.classList.add('hidden');
                modalImg.src = ''; // Clear src
            }, 300); // Match transition duration
            
            document.body.style.overflow = 'auto'; // Re-enable scrolling
        }

        // Close on outside click
        document.getElementById('image-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeImageModal();
            }
        });
        
        // Close on Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeImageModal();
        });

        // ==========================================
        // OSTATNÍ FUNKCE
        // ==========================================

        function initDropdowns() {
            const adultsSelect = document.getElementById('adults');
            const childrenSelect = document.getElementById('children');
            if(!adultsSelect || !childrenSelect) return;
            
            adultsSelect.innerHTML = ''; childrenSelect.innerHTML = '';

            for (let i = 1; i <= KONFIGURACE.maxKapacita; i++) {
                const opt = document.createElement('option');
                opt.value = i; opt.text = i === 1 ? '1 dospělý' : (i < 5 ? `${i} dospělí` : `${i} dospělých`);
                adultsSelect.appendChild(opt);
            }
            for (let i = 0; i <= KONFIGURACE.maxKapacita; i++) {
                const opt = document.createElement('option');
                opt.value = i; opt.text = i === 0 ? '0 dětí' : (i === 1 ? '1 dítě' : (i < 5 ? `${i} děti` : `${i} dětí`));
                childrenSelect.appendChild(opt);
            }
        }

        function updateGuestLogic() {
            validateCapacity();
        }

        function validateCapacity() {
            const adults = parseInt(document.getElementById('adults').value);
            const children = parseInt(document.getElementById('children').value);
            const totalGuests = adults + children;

            const warningEl = document.getElementById('capacity-warning');
            const btn = document.getElementById('submitBtn');

            if (numberOfNights === 0) return;

            if (totalGuests > KONFIGURACE.maxKapacita) {
                warningEl.innerHTML = `Překročena kapacita! Maximálně ${KONFIGURACE.maxKapacita} osob.`;
                warningEl.classList.remove('hidden');
                btn.classList.add('opacity-50', 'cursor-not-allowed');
                btn.disabled = true;
            } else {
                warningEl.classList.add('hidden');
                btn.classList.remove('opacity-50', 'cursor-not-allowed');
                btn.disabled = false;
            }
            calculatePrice(); 
        }

        function calculatePrice() {
            if (numberOfNights === 0) return;

            // Orientační výpočet
            const totalPrice = KONFIGURACE.zakladniCenaNoc * numberOfNights;
            const priceText = `Orientační cena od: ${totalPrice.toLocaleString()} Kč (${numberOfNights}× noc)`;
            document.getElementById('price-text').innerText = priceText;
        }

        function toggleChildAges(val) {
            const container = document.getElementById('child_ages_container');
            const count = parseInt(val);
            container.innerHTML = ''; 
            if (count > 0) {
                container.classList.remove('hidden');
                for (let i = 1; i <= count; i++) {
                    const div = document.createElement('div');
                    div.innerHTML = `
                        <label class="block text-xs text-gray-500 font-light mb-2">${i}. dítě věk</label>
                        <div class="relative">
                            <select class="w-full bg-white text-gray-700 h-12 px-4 rounded-lg appearance-none focus:outline-none cursor-pointer text-xs font-medium border border-gray-100 shadow-sm">
                                <option>0-2 roky</option><option>3-12 let</option><option>13+ let</option>
                            </select>
                            <div class="absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400"><i class="fa-solid fa-chevron-down text-xs"></i></div>
                        </div>`;
                    container.appendChild(div);
                }
            } else {
                container.classList.add('hidden');
            }
        }

        function initCalendar() {
            const calendarInput = document.getElementById('inline-calendar-input');
            if(!calendarInput) return;

            flatpickr("#inline-calendar-input", {
                inline: true, mode: "range", locale: "cs", minDate: "today", dateFormat: "d. m. Y", showMonths: 2,
                onChange: function(selectedDates) {
                   if(selectedDates.length === 2) {
                       selectedDatesRange = selectedDates;
                       const diffTime = Math.abs(selectedDates[1] - selectedDates[0]);
                       numberOfNights = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                       
                       document.getElementById('price-summary').classList.remove('hidden');
                       document.getElementById('room-selection').classList.remove('hidden');
                       validateCapacity();
                   } else {
                       numberOfNights = 0;
                       document.getElementById('price-summary').classList.add('hidden');
                       document.getElementById('room-selection').classList.add('hidden');
                   }
                }
            });
        }

        function initCarousel() {
            const track = document.getElementById('track');
            if(!track) return;
            const items = Array.from(document.querySelectorAll('.carousel-item'));
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            let currentIndex = 1; 
            function updateCarousel() {
                const itemWidth = items[0].offsetWidth;
                const gap = window.innerWidth < 768 ? 16 : 32;
                const totalUnitWidth = itemWidth + gap;
                const offset = -((currentIndex * totalUnitWidth) + (itemWidth / 2));
                track.style.transform = `translateX(${offset}px)`;
                items.forEach((item, index) => {
                    const overlay = item.querySelector('.overlay-layer');
                    const content = item.querySelector('.content-layer');
                    if (index === currentIndex) {
                        item.style.transform = 'scale(1)'; item.style.zIndex = '20';
                        overlay.style.backgroundColor = 'rgba(255, 255, 255, 0)'; 
                        content.style.opacity = '1'; content.style.transform = 'translateY(0)';
                    } else {
                        item.style.transform = 'scale(0.85)'; item.style.zIndex = '10';
                        overlay.style.backgroundColor = 'rgba(255, 255, 255, 0.6)'; 
                        content.style.opacity = '0'; content.style.transform = 'translateY(20px)';
                    }
                });
            }
            nextBtn.addEventListener('click', () => { currentIndex < items.length - 1 ? currentIndex++ : currentIndex = 0; updateCarousel(); });
            prevBtn.addEventListener('click', () => { currentIndex > 0 ? currentIndex-- : currentIndex = items.length - 1; updateCarousel(); });
            window.addEventListener('resize', updateCarousel);
            setTimeout(updateCarousel, 100);
        }
    </script>
</body>
</html>